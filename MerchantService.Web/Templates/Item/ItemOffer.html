<div ng-controller="itemOfferController">
    <div class="panel panel-default item-offer-page">
        <div class="panel-heading"><span string-replace="itemoffer"></span></div>
        <div class="panel-body">
            <form name="itemOffer" novalidate>
                <div ng-show="!isItemDetails">
                    <br />
                    <div class="form-horizontal">
                        <div class="row">
                            <div class="col-lg-5">
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="itemname"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" maxlength="255" ng-model="search.ItemNameEn" name="item-name">
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-5">
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="barcode"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" maxlength="18" ng-model="search.Barcode" name="barcode">
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-2">
                                <button class="btn btn-primary" ng-click="openItemListPopup()" name="item-search-link"><span string-replace="itemsearch"></span></button>
                            </div>
                        </div>
                        <div class="row text-center">
                            <button class="btn btn-primary" name="search-btn" ng-click="searchEvent()"><span string-replace="search"></span></button>
                        </div>
                    </div>
                    <br />
                    <div class="alert alert-success text-center" role="alert" ng-show="errorMessageDisplayForBlankList">
                        <span>{{noItemFound}}</span>
                    </div>
                    <div ng-show="isItemGrid">
                        <label><span string-replace="itemlist"></span></label>
                        <hr />
                        <div class="table-div">
                            <table class="table table-striped table-bordered table-hover" name="item-grid">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th><span string-replace="itemname"></span></th>
                                        <th><span string-replace="itemBarcode"></span></th>
                                        <th><span string-replace="itemcode"></span></th>
                                        <th><span string-replace="itemflavour"></span></th>
                                        <th><span string-replace="category"></span></th>
                                        <th><span string-replace="unit"></span></th>
                                        <th><span string-replace="isactive"></span></th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="item in totalCollection">
                                    <tr>
                                        <td id="{{item.Id}}"><a class="pointer" ng-click="getSubItemList(item.Id)" name="plus-link" ng-show="item.HasChildItem"><i attr="item.Id" class="fa fa-plus action-icon"></i></a></td>
                                        <td>{{item.ItemNameEn}}</td>
                                        <td>{{item.Barcode}}</td>
                                        <td>{{item.Code}}</td>
                                        <td>{{item.FlavourEn}}</td>
                                        <td>{{item.ItemType}}</td>
                                        <td>{{item.Unit}}</td>
                                        <td>{{item.IsActive}}</td>
                                        <td>
                                            <div class="action-td">
                                                <a title="View" name="item-view"><i class="fa fa-eye" ng-click="viewItemDetail(item.Id)"></i></a>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr id="subChild{{item.Id}}" ng-if="item.HasChildItem" class="isHide sub-grid-list">
                                        <td colspan="10">
                                            <table class="table table-striped table-bordered table-hover sub-table" name="sub-table">
                                                <thead>
                                                    <tr>
                                                        <th><span string-replace="itemname"></span></th>
                                                        <th><span string-replace="itemBarcode"></span></th>
                                                        <th><span string-replace="itemcode"></span></th>
                                                        <th><span string-replace="itemflavour"></span></th>
                                                        <th><span string-replace="category"></span></th>
                                                        <th><span string-replace="unit"></span></th>
                                                        <th><span string-replace="isactive"></span></th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="subItem in item.listOfChildProfileAC">
                                                        <td>{{subItem.ItemNameEn}}</td>
                                                        <td>{{subItem.Barcode}}</td>
                                                        <td>{{subItem.Code}}</td>
                                                        <td>{{subItem.FlavourEn}}</td>
                                                        <td>{{subItem.ItemType}}</td>
                                                        <td>{{subItem.Unit}}</td>
                                                        <td>{{subItem.IsActive}}</td>
                                                        <td>
                                                            <div class="action-td">
                                                                <a title="View" name="item-view"><i class="fa fa-eye" ng-click="viewItemDetail(subItem.Id)" ng-disabled="!$root.merchatsettings.isallowcreateitemoffer"></i></a>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div ng-show="totalCollection.length >0" style="text-align:center">
                            <pagination total-items="totalItems" items-per-page="itemsPerPage" ng-model="currentPage" max-size="maxSize" boundary-links="true" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
                        </div>
                    </div>
                </div>
                <br />
                <div ng-show="isItemDetails">
                    <label><span string-replace="itemdetails"></span></label>
                    <hr />
                    <div class="form-horizontal">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="itemname"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" maxlength="255" class="form-control" name="itemName" ng-model="itemName" ng-disabled="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="itemflavour"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" maxlength="255" class="form-control" name="itemFlavour" ng-model="itemFlavour" ng-disabled="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="itemtype"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" name="itemType" ng-model="itemType" ng-disabled="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="itemcode"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" maxlength="20" class="form-control" name="itemCode" ng-model="itemCode" ng-disabled="true" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="barcode"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" maxlength="18" class="form-control" name="barocde" ng-model="barocde" ng-disabled="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="unittype"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" name="unitType" ng-model="unitType" ng-disabled="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="baseunitcount"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" maxlength="6" ng-pattern="/^0*(?:[1-9][0-9]{5}|[1-9][0-9]{4}|[1-9][0-9]{3}|[1-9][0-9]{2}|[1-9][0-9]|[1-9])$/" class="form-control" name="baseUnitCount" ng-model="baseUnitCount" ng-disabled="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="isitemoffer"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" name="isOfferItem" ng-model="isOfferItem" ng-disabled="true">
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="sellprice"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" maxlength="13" ng-pattern="/^0*(?!0\d|$)\d{1,8}(\.\d{1,4})?$/" name="sellPrice" ng-model="sellPrice" ng-disabled="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="sellpricea"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" maxlength="13" ng-pattern="/^0*(?!0\d|$)\d{1,8}(\.\d{1,4})?$/" name="sellPriceA" ng-model="sellPriceA" ng-disabled="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="sellpriceb"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" maxlength="13" ng-pattern="/^0*(?!0\d|$)\d{1,8}(\.\d{1,4})?$/" name="sellPriceB" ng-model="sellPriceB" ng-disabled="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="sellpricec"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" maxlength="13" ng-pattern="/^0*(?!0\d|$)\d{1,8}(\.\d{1,4})?$/" name="sellPriceC" ng-model="sellPriceC" ng-disabled="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="sellpriced"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" maxlength="13" ng-pattern="/^0*(?!0\d|$)\d{1,8}(\.\d{1,4})?$/" name="sellPriceD" ng-model="sellPriceD" ng-disabled="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="costprice"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" maxlength="13" ng-pattern="/^0*(?!0\d|$)\d{1,8}(\.\d{1,4})?$/" name="costPrice" ng-model="costPrice" ng-disabled="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="systemquantity"></span>:</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" maxlength="6" ng-pattern="/^0*(?:[1-9][0-9]{5}|[1-9][0-9]{4}|[1-9][0-9]{3}|[1-9][0-9]{2}|[1-9][0-9]|[1-9])$/" name="systemQuantity" ng-model="systemQuantity" ng-disabled="true">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <div ng-show="isItemDetails">
                    <label><span string-replace="offerdetails"></span></label>
                    <hr />
                    <div class="form-horizontal">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="initiatedby"></span>:</label>
                                    <div class="col-sm-7" ng-class="{ 'has-error': itemOffer.initiated.$touched && itemOffer.initiated.$invalid }">
                                        <ui-select name="initiated" ng-model="itemOfferModel.intiatedId" required ng-change="changeInitiateDropDown()">
                                            <ui-select-match placeholder="Select">{{$select.selected.Name}}</ui-select-match>
                                            <ui-select-choices repeat="initiate.Id as initiate in initiatedList | filter: $select.search">
                                                <div ng-bind-html="initiate.Name | highlight: $select.search" name="{{initiate.Name}}"></div>
                                            </ui-select-choices>
                                        </ui-select>
                                        <span class="error">*</span>
                                        <div class="help-block" ng-messages="itemOffer.initiated.$error" ng-if="itemOffer.initiated.$touched">
                                            <p ng-message="required" class="text-error">{{initiatedRequired}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="selectbranch"></span>:</label>
                                    <div class="col-sm-7">
                                        <div ng-dropdown-multiselect ng-model="branchModel" name="branchOther" options="branchList" class="multi-select-dropdown" selected-model="branchModel" checkboxes="true" extra-settings="selectsettings"></div>
                                        <span class="error">*</span>
                                        <div class="help-block">
                                            <p ng-show="isBranchRequired" class="text-error">{{branchRequired}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group" ng-show="isSupplierDisplay">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="supplier"></span>:</label>
                                    <div class="col-sm-7">
                                        <ui-select ng-model="itemOfferModel.SupplierId" name="supplier">
                                            <ui-select-match placeholder="Select Supplier">{{$select.selected.Name}}</ui-select-match>
                                            <ui-select-choices repeat="supplier.Id as supplier in supplierList | filter: $select.search">
                                                <div ng-bind-html="supplier.Name | highlight: $select.search" name="{{supplier.Name}}"></div>
                                            </ui-select-choices>
                                        </ui-select>
                                        <span class="error">*</span>
                                        <div>
                                            <p class="text-error" ng-show="isSupplierRequired">{{supplierProfileRequired}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="startdate"></span>:</label>
                                    <div class="col-sm-7">
                                        <div class="input-group">
                                            <input type="text" name="start-date" min-date="startTime" disabled class="form-control" datepicker-popup="dd-MMMM-yyyy" ng-model="StartDate" is-open="isStartPickerDateOpened" close-text="Close" />
                                            <span class="input-group-btn">
                                                <button type="button" class="btn btn-default" name="start-date-picker" ng-click="openStartDatePickerDate($event)" ng-disabled="isDisableStartDateIcon"><i class="glyphicon glyphicon-calendar"></i></button>
                                            </span>
                                        </div>
                                        <div class="help-block">
                                            <p class="text-error" ng-show="isStartDate">{{startDateRequired}}</p>
                                            <p class="text-error" ng-show="isStartDateHigher">{{startDateHigher}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div>

                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="starttime"></span>:</label>
                                    <div class="col-sm-7">
                                        <timepicker-pop name="start-time" input-time="startTime" class="input-group" show-meridian='showMeridian' ng-model="itemOfferModel.StartTime">
                                        </timepicker-pop>
                                        <div class="help-block">
                                            <p class="text-error" ng-show="isStartTime">{{startTimeRequired}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="enddate"></span>:</label>
                                    <div class="col-sm-7">
                                        <div class="input-group">
                                            <input type="text" min-date="endTime" name="end-date" disabled class="form-control" datepicker-popup="dd-MMMM-yyyy" ng-model="EndDate" is-open="isEndPickerDateOpened" close-text="Close" />
                                            <span class="input-group-btn">
                                                <button type="button" class="btn btn-default" name="end-date-picker" ng-click="openEndDatePickerDate($event)" ng-disabled="isDisableEndDateIcon"><i class="glyphicon glyphicon-calendar"></i></button>
                                            </span>
                                        </div>
                                        <div class="help-block">
                                            <p class="text-error" ng-show="isendDate">{{endDateRequired}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="endtime"></span>:</label>
                                    <div class="col-sm-7">
                                        <timepicker-pop name="end-time" input-time="endTime" class="input-group" show-meridian='showMeridianEndTime'>
                                        </timepicker-pop>
                                        <div class="help-block">
                                            <p class="text-error" ng-show="isendTime">{{endTimeRequired}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="quantitylimit"></span>:</label>
                                    <div class="col-sm-7" ng-class="{ 'has-error': itemOffer.quantitylimit.$touched && itemOffer.quantitylimit.$invalid }">
                                        <input type="text" class="form-control" maxlength="6" name="quantitylimit" ng-model="itemOfferModel.QuantityLimit" required ng-pattern="/^0*(?:[1-9][0-9]{5}|[1-9][0-9]{4}|[1-9][0-9]{3}|[1-9][0-9]{2}|[1-9][0-9]|[1-9])$/">
                                        <span class="error">*</span>
                                        <span ng-show="isQunatityLimitGreaterThenZero" tooltip="{{qunatityLimitGreaterThenZero}}" tooltip-placement="left"><i class="fa fa-warning text-error icon-big"></i></span>
                                        <div class="help-block" ng-messages="itemOffer.quantitylimit.$error" ng-if="itemOffer.quantitylimit.$touched">
                                            <p ng-message="required" class="text-error">{{quantiryLimitRequired}}</p>
                                            <p ng-message="pattern" class="text-error"><span>{{validQuantityLimit}}</span></p>
                                        </div>
                                        <p class="text-error" ng-show="isNotValidQunatityLimit">{{qunatityLimitNotValid}}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="discount"></span>:</label>
                                    <div class="col-sm-7">
                                        <div class="input-group">
                                            <input class="form-control" name="discount" ng-pattern="/^[0-9]{0,2}(\.[0-9]{1,2})?$|^(100)(\.[0]{1,2})?$/" maxlength="6" ng-model="itemOfferModel.Discount" ng-change="updateSellPrice()"><span class="input-group-addon">%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="sellprice"></span>:</label>
                                    <div class="col-sm-7" ng-class="{  'has-error': itemOffer.sellprice.$touched && itemOffer.sellprice.$invalid }">
                                        <input type="text" class="form-control" maxlength="13" name="sellprice" ng-model="itemOfferModel.SellPrice" required ng-change="changeSellPrice()" pattern="^\d{1,8}(\.\d{1,4})?$">
                                        <span class="error">*</span>
                                        <span ng-show="isAllowSellPriceLowerMarginProfit" tooltip="{{allowSellPriceLowerMarginProfit}}" tooltip-placement="bottom"><i class="fa fa-warning text-warn icon-big"></i></span>
                                        <span ng-show="isSellPriceNotValid" tooltip="{{sellPriceNotValid}}" tooltip-placement="left"><i class="fa fa-warning text-error icon-big"></i></span>
                                        <div class="help-block" ng-messages="itemOffer.sellprice.$error" ng-if="itemOffer.sellprice.$touched">
                                            <p ng-message="required" class="text-error">{{sellPriceRequired}}</p>
                                            <p ng-message="pattern" class="text-error"><span>{{itemValidSellPrice}}</span></p>
                                        </div>
                                        <p class="text-error margin-set" ng-show="isSellPriceNotValidForOldPrice">{{sellPriceNotValidForOldPrice}}</p>
                                        <p class="text-warn margin-set" ng-show="isAllowSellPriceLowerCostPrice">{{allowSellPriceLowerCostPrice}}</p>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="sellpricea"></span>:</label>
                                    <div class="col-sm-7" ng-class="{ 'has-error': itemOffer.sellpricea.$touched && itemOffer.sellpricea.$invalid }">
                                        <input type="text" class="form-control" maxlength="13" name="sellpricea" ng-model="itemOfferModel.SellPriceA" required ng-change="changeSellPrice()" pattern="^\d{1,8}(\.\d{1,4})?$">
                                        <span class="error">*</span>
                                        <span ng-show="isAllowSellPriceALowerMarginProfit" tooltip="{{allowSellPriceLowerMarginProfit}}" tooltip-placement="bottom"><i class="fa fa-warning icon-big text-warn"></i></span>
                                        <span ng-show="isSellPriceANotValid" tooltip="{{sellPriceANotValid}}" tooltip-placement="left"><i class="fa fa-warning text-error icon-big"></i></span>
                                        <div class="help-block" ng-messages="itemOffer.sellpricea.$error" ng-if="itemOffer.sellpricea.$touched">
                                            <p ng-message="required" class="text-error">{{sellPriceARequired}}</p>
                                            <p ng-message="pattern" class="text-error"><span>{{itemValidSellPriceA}}</span></p>
                                        </div>
                                        <p class="text-error margin-set" ng-show="isSellPriceANotValidForOldPrice">{{sellPriceANotValidForOldPrice}}</p>
                                        <p class="text-warn margin-set" ng-show="isAllowSellPriceALowerCostPrice">{{allowSellPriceLowerCostPrice}}</p>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="sellpriceb"></span>:</label>
                                    <div class="col-sm-7" ng-class="{ 'has-error': itemOffer.sellpriceb.$touched && itemOffer.sellpriceb.$invalid }">
                                        <input type="text" class="form-control" maxlength="13" name="sellpriceb" ng-model="itemOfferModel.SellPriceB" required ng-change="changeSellPrice()" pattern="^\d{1,8}(\.\d{1,4})?$">
                                        <span class="error">*</span>
                                        <span ng-show="isAllowSellPriceBLowerMarginProfit" tooltip="{{allowSellPriceLowerMarginProfit}}" tooltip-placement="bottom"><i class="fa fa-warning text-warn icon-big"></i></span>
                                        <span ng-show="isSellPriceBNotValid" tooltip="{{sellPriceBNotValid}}" tooltip-placement="bottom"><i class="fa fa-warning text-error icon-big"></i></span>
                                        <div class="help-block" ng-messages="itemOffer.sellpriceb.$error" ng-if="itemOffer.sellpriceb.$touched">
                                            <p ng-message="required" class="text-error">{{sellPriceBRequired}}</p>
                                            <p ng-message="pattern" class="text-error"><span>{{itemValidSellPriceB}}</span></p>
                                        </div>
                                        <p class="text-error margin-set" ng-show="isSellPriceBNotValidForOldPrice">{{sellPriceBNotValidForOldPrice}}</p>
                                        <p class="text-warn margin-set" ng-show="isAllowSellPriceBLowerCostPrice">{{allowSellPriceLowerCostPrice}}</p>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="sellpricec"></span>:</label>
                                    <div class="col-sm-7" ng-class="{ 'has-error': itemOffer.sellpricec.$touched && itemOffer.sellpricec.$invalid }">
                                        <input type="text" class="form-control" maxlength="13" name="sellpricec" ng-model="itemOfferModel.SellPriceC" required ng-change="changeSellPrice()" pattern="^\d{1,8}(\.\d{1,4})?$">
                                        <span class="error">*</span>
                                        <span ng-show="isAllowSellPriceCLowerMarginProfit" tooltip="{{allowSellPriceLowerMarginProfit}}" tooltip-placement="bottom"><i class="fa fa-warning text-warn icon-big"></i></span>
                                        <span ng-show="isSellPriceCNotValid" tooltip="{{sellPriceCNotValid}}" tooltip-placement="left"><i class="fa fa-warning text-error icon-big"></i></span>
                                        <div class="help-block" ng-messages="itemOffer.sellpricec.$error" ng-if="itemOffer.sellpricec.$touched">
                                            <p ng-message="required" class="text-error">{{sellPriceCRequired}}</p>
                                            <p ng-message="pattern" class="text-error"><span>{{itemValidSellPriceC}}</span></p>
                                        </div>
                                        <p class="text-error margin-set" ng-show="isSellPriceCNotValidForOldPrice">{{sellPriceCNotValidForOldPrice}}</p>
                                        <p class="text-warn margin-set" ng-show="isAllowSellPriceCLowerCostPrice">{{allowSellPriceLowerCostPrice}}</p>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 p-0"><span string-replace="sellpriced"></span>:</label>
                                    <div class="col-sm-7" ng-class="{ 'has-error': itemOffer.sellpriced.$touched && itemOffer.sellpriced.$invalid }">
                                        <input type="text" class="form-control" maxlength="13" name="sellpriced" ng-model="itemOfferModel.SellPriceD" required ng-change="changeSellPrice()" pattern="^\d{1,8}(\.\d{1,4})?$">
                                        <span class="error">*</span>
                                        <span ng-show="isAllowSellPriceDLowerMarginProfit" tooltip="{{allowSellPriceLowerMarginProfit}}" tooltip-placement="bottom"><i class="fa fa-warning text-warn icon-big"></i></span>
                                        <span ng-show="isSellPriceDNotValid" tooltip="{{sellPriceDNotValid}}" tooltip-placement="left"><i class="fa fa-warning text-error icon-big"></i></span>
                                        <div class="help-block" ng-messages="itemOffer.sellpriced.$error" ng-if="itemOffer.sellpriced.$touched">
                                            <p ng-message="required" class="text-error">{{sellPriceDRequired}}</p>
                                            <p ng-message="pattern" class="text-error"><span>{{itemValidSellPriceD}}</span></p>
                                        </div>
                                        <p class="text-error margin-set" ng-show="isSellPriceDNotValidForOldPrice">{{sellPriceDNotValidForOldPrice}}</p>
                                        <p class="text-warn margin-set" ng-show="isAllowSellPriceDLowerCostPrice">{{allowSellPriceLowerCostPrice}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="form-group">
                                <label class="control-label text-right col-sm-2 p-0"><span string-replace="comment"></span>:</label>
                                <div class="col-sm-8">
                                    <textarea class="form-control" name="comment" maxlength="350" ng-model="itemOfferModel.Comment"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <div class="row text-center">
                    <button class="btn btn-primary m-r-10" ng-show="$root.merchatSettings.IsAllowCreateItemOffer" name="submit-btn" ng-click="submitItemOffer()" ng-disabled="itemOffer.$invalid"><span string-replace="submitpos"></span></button>
                    <button class="btn btn-default" name="cancel-btn" ng-click="cancleButtonEvent()"><span string-replace="cancelpos"></span></button>
                </div>
                <script type="text/ng-template" id="itemListPopup">
                    <div class="modal-header">
                        <h3 class="modal-title"><span string-replace="itemlist"></span></h3>
                    </div>
                    <div class="modal-body">
                        <div class="form-horizontal">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="control-label col-sm-5 p-0"><span string-replace="itemnameen"></span>:</label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" maxlength="255" name="item-name" ng-model="search.ItemNameEn" auto-focus="isFocusIn">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-sm-5 p-0"><span string-replace="selectCategory"></span>:</label>
                                        <div class="col-sm-7">
                                            <ui-select ng-model="search.CategoryId" name="select-category">
                                                <ui-select-match placeholder="Select Category">{{$select.selected.Name}}</ui-select-match>
                                                <ui-select-choices repeat="category.Id as category  in categoryList | filter: $select.search">
                                                    <div ng-bind-html="category.Name | highlight: $select.search" name="{{category.Name}}"></div>
                                                </ui-select-choices>
                                            </ui-select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4 p-0"><span string-replace="itemBarcode"></span>:</label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" maxlength="18" ng-model="search.Barcode" name="barcode">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-sm-4 p-0"><span string-replace="unit"></span>:</label>
                                        <div class="col-sm-7">
                                            <ui-select name="unit" ng-model="search.UnitParamTypeId" required name="unit">
                                                <ui-select-match placeholder="Select Unit">{{$select.selected.Name}}</ui-select-match>
                                                <ui-select-choices repeat="unitType.Id as unitType in unitList | filter: $select.search">
                                                    <div ng-bind-html="unitType.Name | highlight: $select.search" name="{{unitType.Name}}"></div>
                                                </ui-select-choices>
                                            </ui-select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4 p-0"><span string-replace="itemflavouren"></span>:</label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" maxlength="255" ng-model="search.FlavourEn" name="flavour">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-sm-4 p-0"><span string-replace="itemcode"></span>:</label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" maxlength="20" ng-model="search.Code" name="item-code">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row text-center">
                            <button class="btn btn-primary" ng-click="searchEvent()" name="searc-btn"><span string-replace="search"></span></button>
                        </div>
                        <br />
                        <div class="alert alert-success text-center" role="alert" ng-show="errorMessageDisplayForBlankList">
                            <span>{{noItemFound}}</span>
                        </div>
                        <div ng-show="isItemGrid">
                            <br />
                            <label><span string-replace="itemsearch"></span></label>
                            <hr />
                            <div class="table-div">
                                <table class="table table-striped table-bordered table-hover" name="item-grid">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th><span string-replace="itemname"></span></th>
                                            <th><span string-replace="itemBarcode"></span></th>
                                            <th><span string-replace="itemcode"></span></th>
                                            <th><span string-replace="itemflavour"></span></th>
                                            <th><span string-replace="category"></span></th>
                                            <th><span string-replace="unit"></span></th>
                                            <th><span string-replace="isactivate"></span></th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody ng-repeat="item in totalCollection">
                                        <tr>
                                            <td id="item{{item.Id}}"><a class="pointer" ng-click="getchildItemList(item.Id)" name="plus-link" ng-show="item.HasChildItem"><i attr="item.Id" class="fa fa-plus action-icon"></i></a></td>
                                            <td>{{item.ItemNameEn}}</td>
                                            <td>{{item.Barcode}}</td>
                                            <td>{{item.Code}}</td>
                                            <td>{{item.FlavourEn}}</td>
                                            <td>{{item.ItemType}}</td>
                                            <td>{{item.Unit}}</td>
                                            <td>{{item.IsActive}}</td>
                                            <td class="action-td-width">
                                                <div class="action-td">
                                                    <a title="View" name="item-view"><i class="fa fa-eye" ng-click="viewItemDetail(item.Id)"></i></a>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr id="subChildItem{{item.Id}}" ng-if="item.HasChildItem" class="isHide sub-grid-list">
                                            <td colspan="10">
                                                <table class="table table-striped table-bordered table-hover sub-table" name="sub-table">
                                                    <thead>
                                                        <tr>
                                                            <th><span string-replace="itemname"></span></th>
                                                            <th><span string-replace="itemBarcode"></span></th>
                                                            <th><span string-replace="itemcode"></span></th>
                                                            <th><span string-replace="itemflavour"></span></th>
                                                            <th><span string-replace="category"></span></th>
                                                            <th><span string-replace="unit"></span></th>
                                                            <th><span string-replace="isactivate"></span></th>
                                                            <th></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="subItem in item.listOfChildProfileAC">
                                                            <td>{{subItem.ItemNameEn}}</td>
                                                            <td>{{subItem.Barcode}}</td>
                                                            <td>{{subItem.Code}}</td>
                                                            <td>{{subItem.FlavourEn}}</td>
                                                            <td>{{subItem.ItemType}}</td>
                                                            <td>{{subItem.Unit}}</td>
                                                            <td>{{subItem.IsActive}}</td>
                                                            <td class="action-td-width">
                                                                <div class="action-td">
                                                                    <a title="View" name="item-view"><i class="fa fa-eye" ng-click="viewItemDetail(item.Id)"></i></a>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div ng-show="totalCollection.length >0" style="text-align:center">
                                <pagination total-items="totalItems" items-per-page="itemsPerPage" ng-model="currentPage" max-size="maxSize" boundary-links="true" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary m-r-10" type="button" name="cancel-btn" ng-click="cancelButtonForItemPopup()"><span string-replace="cancelpos"></span></button>
                        </div>
                </script>
                <script type="text/ng-template" id="itemOfferMessage">
                    <div class="modal-header">
                        <button type="button" name="close-btn" class="close" data-dismiss="modal" ng-click="clickOnClose()" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h3 class="modal-title"><span string-replace="createioresponse"></span></h3>
                    </div>
                    <div class="modal-body">
                        <div class="form-horizontal">
                            <div ng-repeat="error in errorMessageList">
                                <p>
                                    For <b>{{error.BranchName}}</b> : <span ng-class="error.IsSuccess ?'updateText':'error'">{{error.StringMessage}}</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary" name="yes-btn" type="button" ng-click="clickOnClose()"><span string-replace="okay"></span></button>
                    </div>
                </script>
            </form>
        </div>
        <div id="busyindicator" class="busy-indicator" ng-show="isDataLoading">
            <img src="/Content/Images/Loader.gif" />
        </div>
    </div>
</div>
